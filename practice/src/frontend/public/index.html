<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Orders Frontend</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 2rem;
        background: #f4f4f4;
      }
      h1 {
        color: #333;
      }
      .filter {
        margin-bottom: 1rem;
      }

      /* Cards container */
      #orders {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }

      /* Card styling */
      .order-card {
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
      }
      .order-card:hover {
        transform: translateY(-3px);
      }

      .order-header {
        font-weight: bold;
        margin-bottom: 0.5rem;
        color: #222;
      }

      .order-field {
        margin: 0.25rem 0;
      }

      .order-field span {
        font-weight: bold;
        color: #555;
      }

      .status {
        display: inline-block;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-size: 0.9rem;
        color: #fff;
      }
      .status.new {
        background-color: #3498db;
      }
      .status.paid {
        background-color: #27ae60;
      }
      .status.shipped {
        background-color: #f39c12;
      }
    </style>
  </head>
  <body>
    <h1>Orders Frontend</h1>

    <div class="filter">
      <label for="status">Filter by status:</label>
      <select id="status">
        <option value="">-- all --</option>
        <option value="new">new</option>
        <option value="paid">paid</option>
        <option value="shipped">shipped</option>
      </select>
      <button onclick="loadOrders()">Load Orders</button>
    </div>

    <div id="orders"></div>

    <script>
      async function loadOrders() {
        const status = document.getElementById("status").value;
        let url = "{{BACKEND_URL}}/orders";
        if (status) {
          url += "?status=" + encodeURIComponent(status);
        }

        try {
          const res = await fetch(url);
          const data = await res.json();

          const container = document.getElementById("orders");
          container.innerHTML = "";

          data.forEach((o) => {
            const card = document.createElement("div");
            card.className = "order-card";
            card.innerHTML = `
              <div class="order-header">Order #${o.order_id}</div>
              <div class="order-field"><span>Customer:</span> ${o.customer_id}</div>
              <div class="order-field"><span>Status:</span> <span class="status ${o.status}">${o.status}</span></div>
              <div class="order-field"><span>Total:</span> ${o.total_amount} ${o.currency}</div>
              <div class="order-field"><span>Created:</span> ${o.created_at}</div>
              <div class="order-field"><span>Updated:</span> ${o.updated_at}</div>
            `;
            container.appendChild(card);
          });
        } catch (err) {
          alert("Error loading orders: " + err);
        }
      }

      // auto-load on page open
      loadOrders();
    </script>
  </body>
</html>
